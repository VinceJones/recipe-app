(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(59)},31:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),i=n.n(s),c=(n(31),n(18)),o=n(1),u=n.n(o),l=n(7),p=n(2),h=n(3),d=n(5),m=n(4),f=n(6),g=n(23),v=n(13),b=n(10),y=n(11),O=(n(35),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getContainerClass=function(e){var t="Message-container";switch(e){case"error":t=t.concat(" Message-error");break;case"success":t=t.concat(" Message-success");break;case"warning":t=t.concat(" Message-warning");break;default:return""}return t},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.message&&r.a.createElement("div",{className:this.getContainerClass(this.message.status)},r.a.createElement("p",{className:"Message-body"},this.message.text)))}},{key:"message",get:function(){return this.props&&this.props.messageUtility?this.props.messageUtility.getMessage():{}}}]),t}(a.Component)),j=(n(37),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.props.userUtility.user.clientId){e.next=5;break}return e.next=3,n.props.userUtility.setClientId();case 3:return e.next=5,n.props.userUtility.getIsUserAdmin();case 5:n.props.messageUtility&&!1===n.props.messageUtility.message.shown&&n.props.messageUtility.toggleMessageShown();case 6:case"end":return e.stop()}},e,this)})),n.componentWillUnmount=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.messageUtility.message.shown){e.next=3;break}return e.next=3,n.props.messageUtility.clearMessages();case 3:case"end":return e.stop()}},e,this)})),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(O,{messageUtility:this.props.messageUtility})),r.a.createElement("div",{className:"page container"},r.a.createElement("div",null,r.a.createElement("h1",{className:"Page-title"},this.props.pageTitle)),r.a.createElement("div",null,this.props.children)))}}]),t}(a.Component)),w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.a)(this,e),this.name=t.name?t.name:"",this.amount=t.amount?t.amount:"",this.measurementType=t.measurementType?t.measurementType:""},k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.a)(this,e),this.id=t.id?t.id:"",this.name=t.name?t.name:""},E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.a)(this,e),this.tranformIngredientData=function(e){if(!e)return[new w];var t=[];return e.forEach(function(e){t.push(new w(e))}),t},this.transformTagData=function(e){if(!e)return[new k];var t=[];return e.forEach(function(e){t.push(new k(e))}),t},this.id=""!==t.id?t.id:"",this.name=t.name?t.name:"",this.description=t.description?t.description:"",this.ingredients=this.tranformIngredientData(t.ingredients),this.tags=this.transformTagData(t.tags)},U=function(){function e(){var t=this;Object(p.a)(this,e),this.postRecipe=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(n),r=t.postHeaders,s={method:"POST",headers:r,body:a},e.next=5,t.makeRequest(t.endpoints.postRecipes,s).then(function(e){return e}).catch(function(e){console.log(e)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.putRecipe=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(n),r=t.postHeaders,s={method:"PUT",headers:r,body:a},e.next=5,t.makeRequest(t.endpoints.updateRecipe,s).then(function(e){return e}).catch(function(e){console.log(e)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getRecipes=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.makeRequest(t.endpoints.getRecipes).then(function(e){var t=JSON.parse(e.data),n=[];return t.data.forEach(function(e){n.push(new E(e))}),n}).catch(function(e){console.log(e)}));case 1:case"end":return e.stop()}},e,this)})),this.getRecipeById=function(){var e=Object(l.a)(u.a.mark(function e(n){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoints.getRecipes+"/"+n,e.next=3,t.makeRequest(a).then(function(e){if(!t.isEmpty(e.data)){var n=JSON.parse(e.data);return void 0!==n?new E(n):void 0}}).catch(function(e){console.log(e)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},this.deleteRecipeById=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoints.deleteRecipe+"/"+n,r={method:"DELETE"},e.next=4,t.makeRequest(a,r).then(function(e){return JSON.parse(e.data)}).catch(function(e){console.log(e)});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.makeRequest=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",fetch(t.endpoints.host+n,a).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log("error",e),e}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.endpoints={host:this.host+"://localhost:5000",postRecipes:"/recipes/post",updateRecipe:"/recipes/update",deleteRecipe:"/recipes/delete",getRecipes:"/recipes/get"}}return Object(h.a)(e,[{key:"host",get:function(){return"http"}},{key:"postHeaders",get:function(){var e=new Headers;return e.append("Content-type","application/json"),e.append("Accept","application/json"),e}}]),e}(),C=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"measurementTypes",get:function(){return[{name:"Each",value:"ea"},{name:"Pinch",value:"pinch"},{name:"Teaspoon(s)",value:"tsp"},{name:"Tablespoon(s)",value:"tbsp"},{name:"Cup(s)",value:"cp"},{name:"Quart(s)",value:"qt"},{name:"Gallon(s)",value:"gl"},{name:"Ounce(s)",value:"oz"},{name:"Pound(s)",value:"lbs"},{name:"Liter(s)",value:"lt"},{name:"Milliliter(s)",value:"ml"},{name:"Gram(s)",value:"gr"},{name:"Kilogram(s)",value:"kilo"}]}},{key:"textAreaConfig",get:function(){return{rows:"10",columns:"30"}}}]),e}(),x=n(16),R=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){n.props.preventDefault&&e.preventDefault(),n.props.onClick()},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("a",this.attributes,this.props.text)}},{key:"className",get:function(){var e="btn";return void 0!==this.props.className&&null!==this.props.className&&""!==this.props.className&&(e+=" "+this.props.className),e}},{key:"attributes",get:function(){var e={};return e.href=this.props.link,this.props.isBtn&&(e.role="button"),this.props.onClick&&(e.onClick=this.onClick),this.props.className&&(e.className=this.props.className),Object(b.a)({},e,this.props.attr)}}]),t}(a.Component),S=new C,A=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFieldChange=function(){return function(e){var t=e.target,a=Object(b.a)({},n.props.ingredient);a[t.name]=t.value,n.props.onChange(a)}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Ingredient-group"},r.a.createElement("div",{className:"Ingredient-field"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.props.ingredient.name,onChange:this.handleFieldChange()})),r.a.createElement("div",{className:"Ingredient-field Ingredient-fieldInline"},r.a.createElement("label",null,"Amount"),r.a.createElement("input",{className:"Ingredient-amount",type:"text",name:"amount",value:this.props.ingredient.amount,onChange:this.handleFieldChange()})),r.a.createElement("div",{className:"Ingredient-field Ingredient-fieldInline"},r.a.createElement("label",null,"Measurement Type"),r.a.createElement("select",{name:"measurementType",value:this.props.ingredient.measurementType,onChange:this.handleFieldChange()},S.measurementTypes.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.name)}))),r.a.createElement("div",{className:"Ingredient-removeBtn"},this.props.showDeleteButton?r.a.createElement(R,{text:"Remove Ingredient",link:"#",className:"btn btn_secondary",isBtn:!0,onClick:this.props.requestDeleteGroup,preventDefault:!0}):null))}}]),t}(a.Component),N=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFieldChange=function(e){return function(t){var a=Object(x.a)(n.props.ingredients);a[e]=new w(t),n.props.onChange(a)}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",null,"Ingredients"),r.a.createElement("div",{className:"Ingredient-container"},this.props.ingredients.map(function(t,n){return r.a.createElement(A,{key:n,ingredient:t,onChange:e.handleFieldChange(n),showDeleteButton:e.shouldShowDeleteButton,requestDeleteGroup:function(){return e.props.requestDeleteGroup(n)}})}),r.a.createElement("div",{className:"Ingredient-addBtn"},r.a.createElement(R,{text:"Add Ingredient",link:"#",className:"btn btn_tertiary",isBtn:!0,onClick:this.props.requestAddGroup,preventDefault:!0}))))}},{key:"shouldShowDeleteButton",get:function(){return this.props.ingredients.length>1}}]),t}(a.Component),M=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFieldChange=function(){return function(e){var t=e.target,a=Object(b.a)({},n.props.tag);a[t.name]=t.value,n.props.onChange(a)}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TagForm-container"},r.a.createElement("label",{className:"isHidden"},"Tag"),r.a.createElement("input",{className:"TagForm-input",type:"text",name:"name",value:this.props.tag.name,onChange:this.handleFieldChange()}),r.a.createElement(R,{text:"\xd7",link:"#",isBtn:!1,className:"Tag-removeIcon",onClick:function(){return e.props.requestDeleteTag()}}))}},{key:"tag",get:function(){return this.props.tag}}]),t}(a.Component),I=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFieldChange=function(e){return function(t){var a=Object(x.a)(n.props.tags);a[e]=new k(t),n.props.onChange(a)}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",null,"Tags"),this.props.tags.map(function(t,n){return r.a.createElement(M,{key:n,tag:t,index:n,onChange:e.handleFieldChange(n),requestDeleteTag:function(){return e.props.requestDeleteTag(n)}})}),r.a.createElement("div",{className:"Tag-addBtn"},r.a.createElement(R,{text:"Add Tag",link:"#",className:"btn btn_tertiary",isBtn:!0,onClick:this.props.requestAddTag,preventDefault:!0})))}}]),t}(a.Component),T=new C,D=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.handleSubmit(t);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"Recipe-container",onSubmit:this.props.handleSubmit},r.a.createElement("div",{className:"Recipe-field"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.props.recipe.name,onChange:this.props.handleRecipeFieldChange()})),r.a.createElement("div",{className:"Recipe-field"},r.a.createElement("label",null,"Description:"),r.a.createElement("textarea",{name:"description",rows:T.textAreaConfig.rows,cols:T.textAreaConfig.columns,value:this.props.recipe.description,onChange:this.props.handleRecipeFieldChange()})),r.a.createElement(I,{tags:this.props.recipe.tags,onChange:this.props.handleChildFieldChange("tags"),requestDeleteTag:function(t){return e.props.handleDeleteItemFromArray(t,"tags")},requestAddTag:function(){return e.props.handleAddTag()}}),r.a.createElement(N,{ingredients:this.props.recipe.ingredients,onChange:this.props.handleChildFieldChange("ingredients"),requestDeleteGroup:function(t){return e.props.handleDeleteIngredientGroup(t)},requestAddGroup:this.props.handleAddIngredientGroup}),r.a.createElement("div",null,r.a.createElement("input",{className:"btn btn_primary",type:"submit",value:"Submit"})))}}]),t}(a.Component),F=function e(){Object(p.a)(this,e),this.statuses=function(){return{WARNING:"warning",ERROR:"error",SUCCESS:"success"}},this.getPostMessageStatus=function(e){return console.log("getPostMessageStatus saved",e),e?"success":"error"},this.getSavedRecipeMessage=function(e){return e?"Recipe has been saved.":"Recipe has not been saved."},this.getRecipeNotFoundStatus=function(){return"warning"},this.getRecipeNotFoundMessage=function(){return"Recipe could not be found, try adding a new recipe"},this.getRecipeUpdateStatus=function(){return"success"},this.getRecipeUpdateMessage=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+" recipe has been updated."},this.getRecipeDeleteStatus=function(){return"success"},this.getRecipeDeleteMessage=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+" recipe has been deleted."},this.getRecipeDeleteFailStatus=function(){return"error"},this.getRecipeDeleteFailMessage=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+" recipe has not been deleted."}},P=(n(39),new U),q=new F,B=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRecipeFromPath();case 2:n.setPageTitle();case 3:case"end":return e.stop()}},e,this)})),n.setPageTitle=function(){var e=Object(b.a)({},n.state);""!==n.state.recipe.name&&""!==n.state.recipe.id?e.pageTitle="Edit "+n.state.recipe.name+" recipe":e.pageTitle="Add a Recipe",n.setState(e)},n.getRecipeFromPath=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.match.params.hasOwnProperty("recipeId")){e.next=2;break}return e.abrupt("return");case 2:return t=parseInt(n.props.match.params.recipeId),e.next=5,P.getRecipeById(t).then(function(e){e instanceof E?n.setState({recipe:e}):(n.props.messageUtility.setMessage(q.getRecipeNotFoundStatus(),q.getRecipeNotFoundMessage()),n.props.history.push("/recipe/add"))});case 5:case"end":return e.stop()}},e,this)})),n.handleRecipeFieldChange=function(){return function(e){var t=e.target,a=n.state.recipe;a[t.name]=t.value,n.setState({recipe:a})}},n.handleChildFieldChange=function(e){return function(t){var a=Object(b.a)({},n.state);a.recipe[e]=t,n.setState(a)}},n.handleAddIngredientGroup=function(){var e=n.state.recipe;e.ingredients=e.ingredients.concat([new w]),n.setState({recipe:e})},n.handleAddTag=function(){var e=n.state.recipe;e.tags=e.tags.concat([new k]),n.setState({recipe:e})},n.handleDeleteIngredientGroup=function(e){var t=n.state.recipe;t.ingredients=t.ingredients.filter(function(t,n){return e!==n}),n.setState({recipe:t})},n.handleDeleteItemFromArray=function(e,t){console.log(e,t);var a=n.state.recipe;a[t]=a[t].filter(function(t,n){return e!==n}),n.setState({recipe:a})},n.handleSubmit=function(){var e=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.state.recipe.hasOwnProperty("id")||""===n.state.recipe.id||void 0===n.state.recipe.id){e.next=6;break}return e.next=4,P.putRecipe(n.state.recipe).then(function(e){return n.props.messageUtility.setMessage(q.getRecipeUpdateStatus(e.data),q.getRecipeUpdateMessage(n.state.recipe.name)),e});case 4:e.next=8;break;case 6:return e.next=8,P.postRecipe(n.state.recipe).then(function(e){return n.props.messageUtility.setMessage(q.getPostMessageStatus(e.data),q.getSavedRecipeMessage(e.data)),e});case 8:n.props.history.push("/");case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={recipe:new E,pageTitle:""},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(Object(y.a)(n))),console.log("FormPage",n.props),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(j,{pageTitle:this.state.pageTitle,messageUtility:this.props.messageUtility,userUtility:this.props.userUtility},r.a.createElement(D,{recipe:this.state.recipe,handleSubmit:function(t){return e.handleSubmit(t)},handleRecipeFieldChange:function(){return e.handleRecipeFieldChange()},handleChildFieldChange:function(t){return e.handleChildFieldChange(t)},handleDeleteIngredientGroup:function(t){return e.handleDeleteIngredientGroup(t)},handleDeleteItemFromArray:function(t,n){e.handleDeleteItemFromArray(t,n)},handleAddIngredientGroup:function(){return e.handleAddIngredientGroup()},handleAddTag:function(){return e.handleAddTag()}}))}}]),t}(a.Component),G=(n(41),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getShowHideClassName=function(e){return e?"Modal Modal-display":"Modal Modal-hide"},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getShowHideClassName(this.props.show)},r.a.createElement("section",{className:"Modal-main"},this.props.children,r.a.createElement("div",{className:"Modal-btnCloseContainer"},r.a.createElement(R,{text:"Close",link:"#",className:"btn btn_tertiary btn_modalClose",isBtn:!0,onClick:function(){return e.props.hideModal()}}))))}}]),t}(a.Component)),L=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(G,{show:this.props.showModal,hideModal:this.props.hideModal},r.a.createElement("div",{className:"ListRecipe-deleteModal"},r.a.createElement("h3",null,"Are you sure you would like delete ",this.recipeName," recipe?"),r.a.createElement("div",{className:"ListRecipe-buttonGroup"},r.a.createElement(R,{text:"Yes",link:"#",className:"btn btn_secondary",isBtn:!0,onClick:function(){return e.props.handleDeleteRecipe()}}),r.a.createElement(R,{text:"No",link:"#",className:"btn btn_primary",isBtn:!0,onClick:function(){return e.props.hideModal()}}))))}},{key:"recipeName",get:function(){return this.props.deleteRecipe.hasOwnProperty("name")&&void 0!==this.props.deleteRecipe.name&&null!==this.props.deleteRecipe.name&&""!==this.props.deleteRecipe.name?this.props.deleteRecipe.name:"this"}}]),t}(a.Component),_=n(15),J=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){n.props.onClick(n.props.label,e)},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"getArrowIcon",value:function(e){return e?r.a.createElement("span",null,"\u25bc"):r.a.createElement("span",null,"\u25b2")}},{key:"getContainerClass",value:function(){return this.props.isOpen?"Accordion-container Accordion-selected":"Accordion-container"}},{key:"render",value:function(){return r.a.createElement("div",{className:this.getContainerClass()},r.a.createElement("div",{className:"Accordion-details",onClick:this.onClick},r.a.createElement("div",null,r.a.createElement("h3",{className:"Accordion-title"},this.props.label),r.a.createElement("span",{className:"Accordion-icon"},this.getArrowIcon(this.props.isOpen))),this.props.isOpen&&r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",null,this.props.description),r.a.createElement("div",{className:"Accordion-inner"},this.props.children))))}}]),t}(a.Component),H=(n(43),function(e){function t(e){var n;Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).onClick=function(e){var t=Object(y.a)(Object(y.a)(n)),a=t.props.allowMultipleOpen,r=t.state.openSections,s=!!r[e];a?n.setState({openSections:Object(b.a)({},r,Object(_.a)({},e,!s))}):n.setState({openSections:Object(_.a)({},e,!s)})};var a={};return n.props.children.forEach(function(e,t){e.props.isOpen&&(a[e.props.label]=!0)}),n.state={openSections:a},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",null,this.props.children.map(function(t,n){return r.a.createElement(J,{key:n,isOpen:!!e.state.openSections[t.props.label],label:t.props.label,description:t.props.description,onClick:e.onClick},t.props.children)}))}}]),t}(a.Component));H.defaultProps={allowMultipleOpen:!1};var W=H,V=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("h3",null,this.props.ingredient.amount," ",this.props.ingredient.measurementType," - ",this.props.ingredient.name),r.a.createElement("div",null))}}]),t}(r.a.Component),K=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"ListRecipe-container"},r.a.createElement(W,{allowMultipleOpen:!0},this.props.recipes.map(function(t,n){return r.a.createElement("div",{key:n,label:t.name,description:t.description},r.a.createElement("ul",null,r.a.createElement("h4",null,"Ingredients"),t.ingredients.map(function(e,t){return r.a.createElement(V,{key:t,ingredient:e})})),e.props.userUtility.isUserAdmin&&r.a.createElement("div",null,r.a.createElement(R,{text:"Edit recipe",link:"recipe/edit/"+t.id,className:"btn btn_tertiary",isBtn:!0}),r.a.createElement(R,{text:"Delete recipe",link:"#",className:"btn btn_secondary",isBtn:!0,onClick:function(){return e.props.showModal(t)}})))})))}}]),t}(a.Component),z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).filterList=function(e){n.props.filterList(e)},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ListPage-container"},r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("input",{type:"text",name:"filterInput",value:this.props.filterValue,className:"ListPage-filterInput",placeholder:"Search by Recipe name, Ingredient name, or Tag name",onChange:this.filterList}))),r.a.createElement(K,{recipes:this.props.recipes,showModal:function(t){return e.props.showModal(t)},userUtility:this.props.userUtility}))}}]),t}(a.Component),Q=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"filterItems",value:function(e,t){var n=this;return e=e.filter(function(e){return n.search(e,t)})}},{key:"search",value:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)if(this.search(e[n],t))return!0}else{if("object"!==typeof e)return-1!==String(e).toLowerCase().search(t.toLowerCase());for(var a in e)if(this.search(e[a],t))return!0}return!1}}]),e}(),Y=(n(45),new U),$=new F,X=new Q,Z=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){n.updateStateWithRecipes()},n.showModal=function(e){n.setState({showModal:!0,deleteRecipe:e})},n.hideModal=function(){n.setState({showModal:!1})},n.updateStateWithRecipes=function(){Y.getRecipes().then(function(e){e&&e.length>0&&e[0]instanceof E?n.setState({recipes:e,filteredRecipes:e}):n.setState({recipes:[],filteredRecipes:[]})})},n.handleDeleteRecipe=function(){var e=n.state.deleteRecipe;Y.deleteRecipeById(e.id).then(function(t){t?n.props.messageUtility.setMessage($.getRecipeDeleteStatus(),$.getRecipeDeleteMessage(e.name)):n.props.messageUtility.setMessage($.getRecipeDeleteFailStatus(),$.getRecipeDeleteFailMessage(e.name)),n.setState({showModal:!1}),n.updateStateWithRecipes()})},n.filterList=function(e){var t=n.state;if(t.filterValue=e.target.value,n.setState(t),""!==e.target.value){var a=X.filterItems(n.state.recipes,e.target.value);n.setState({filteredRecipes:a})}else n.setState({filteredRecipes:n.state.recipes})},n.state={showModal:!1,deleteRecipe:{},recipes:[],filteredRecipes:[],filterValue:""},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(j,{pageTitle:"Recipes",messageUtility:this.props.messageUtility,userUtility:this.props.userUtility},r.a.createElement(z,{filterValue:this.state.filterValue,recipes:this.state.filteredRecipes,showModal:function(t){return e.showModal(t)},filterList:function(t){return e.filterList(t)},userUtility:this.props.userUtility}),this.props.userUtility.isUserAdmin&&r.a.createElement(L,{showModal:this.state.showModal,handleDeleteRecipe:function(){return e.handleDeleteRecipe()},hideModal:function(){return e.hideModal()},deleteRecipe:this.state.deleteRecipe}))}}]),t}(a.Component),ee=n(22),te=n.n(ee),ne=function e(){var t=this;Object(p.a)(this,e),this.getClientId=Object(l.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.makeRequest(t.endpoints.clientId);case 2:if((n=e.sent).hasOwnProperty("data")){e.next=5;break}return e.abrupt("return","");case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}},e,this)})),this.getAccessToken=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoints.accessToken+"/"+n,e.next=3,t.makeRequest(a);case 3:if((r=e.sent).hasOwnProperty("data")){e.next=6;break}return e.abrupt("return","");case 6:return console.log("getAccessToken",r.data),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.isUserAdmin=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.accessToken){e.next=2;break}return e.abrupt("return",!1);case 2:return console.log("authHandler.isUserAdmin",n.accessToken),a=t.endpoints.isUserAdmin+"/"+n.accessToken,e.next=6,t.makeRequest(a);case 6:return r=e.sent,console.log("isUserAdmin",r),e.abrupt("return",r.user);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.makeRequest=function(){var e=Object(l.a)(u.a.mark(function e(n){var a,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",fetch(t.endpoints.host+n,a).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log("error",e),e}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.endpoints={host:"http://localhost:5000",redirectUri:"http://localhost:5000/login",accessToken:"/auth/login",clientId:"/auth/get/client_id",isUserAdmin:"/auth/get/isUserAdmin"}},ae=new ne,re=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onSuccess=function(){var e=Object(l.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",console.log("code:",t.code),e.next=4,ae.getAccessToken(t.code);case 4:return(r=e.sent).hasOwnProperty("data")&&(a=r.data),e.next=8,n.props.userUtility.setUser(a);case 8:n.props.history.push("/");case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onFailure=function(e){return console.error("error",e)},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(j,{pageTitle:"Login",messageUtility:this.props.messageUtility,userUtility:this.props.userUtility},r.a.createElement(te.a,{clientId:this.props.userUtility.user.clientId,onSuccess:this.onSuccess,onFailure:this.onFailure,redirectUri:ae.endpoints.redirectUri}))}}]),t}(a.Component),se=function(e){var t=e.path,n=e.text;return r.a.createElement(R,{className:"MainMenu-menuItem",link:t,text:n})},ie=[{path:"/recipe/add",text:"Add a Recipe",className:"",isAdmin:!0},{path:"/",text:"View Recipes",className:"",isAdmin:!1},{path:"/login",text:"Login",className:"",isAdmin:!1}],ce=(n(47),function(e){var t=e.userUtility,n=ie;return!1===t.isUserAdmin&&(n=n.filter(function(e,t){return!e.isAdmin})),r.a.createElement("div",{className:"MainMenu-container"},n.map(function(e,t){return r.a.createElement(se,{key:t,menuClass:e.className,path:e.path,text:e.text})}))}),oe=function e(t){var n=t.status,a=void 0===n?"":n,r=t.text,s=void 0===r?"":r,i=t.shown,c=void 0===i||i;Object(p.a)(this,e),this.status=a||"",this.text=s||"",this.shown=c},ue=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.a)(this,e),this.accessToken=t.accessToken?t.accessToken:"",this.clientId=t.clientId?t.clientId:""},le=(n(49),new ne),pe=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.getUser(),""===n.state.userUtility.user.clientId){e.next=6;break}return e.next=4,n.setClientId();case 4:return e.next=6,n.getIsUserAdmin();case 6:case"end":return e.stop()}},e,this)})),n.clearMessages=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(new oe({}));case 2:case"end":return e.stop()}},e,this)})),n.getMessage=function(){return n.state.messageUtility.message.props},n.setMessage=function(){var e=Object(l.a)(u.a.mark(function e(t,a){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n.state).messageUtility.message=new oe({status:t,text:a}),e.next=4,n.setState(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.toggleMessageShown=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n.state.messageUtility){e.next=5;break}return(t=n.state.messageUtility.message).messageUtility.message.shown=!0!==t.messageUtility.message.shown,e.next=5,n.setState(t);case 5:case"end":return e.stop()}},e,this)})),n.setClientId=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,e.next=3,le.getClientId();case 3:n.state.userUtility.user.clientId=e.sent,console.log("setClientId:",n.state.userUtility.user),n.setState(t);case 6:case"end":return e.stop()}},e,this)})),n.getUser=Object(l.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(n.state.userUtility.storageKey);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:(a=n.state).userUtility.user=new ue(JSON.parse(t)),n.setState(a);case 8:case"end":return e.stop()}},e,this)})),n.getIsUserAdmin=Object(l.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.isUserAdmin(n.state.userUtility.user);case 2:return t=e.sent,console.log("getIsUserAdmin",t),(a=n.state).userUtility.isUserAdmin=t,n.setState(a),e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),n.setUser=function(){var e=Object(l.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||n.setState({}),(a=n.state).userUtility.user.accessToken=t,n.setState(a),console.log("setUser user",n.state.userUtility.user),e.next=7,localStorage.setItem(n.state.userUtility.storageKey,JSON.stringify(n.state.userUtility.user));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={messageUtility:{message:new oe({}),getMessage:function(){return n.getMessage()},clearMessages:function(){return n.clearMessages()},setMessage:function(e,t){return n.setMessage(e,t)},toggleMessageShown:function(){return n.toggleMessageShown()}},userUtility:{user:new ue,storageKey:"recipeAppUser",isUserAdmin:!1,setUser:function(e){return n.setUser(e)},setClientId:function(){return n.setClientId()},getIsUserAdmin:function(){return n.getIsUserAdmin()}}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(ce,{userUtility:this.state.userUtility})),r.a.createElement("section",{className:"App-body"},r.a.createElement(v.d,null,r.a.createElement(de,{exact:!0,path:"/",component:Z,messageUtility:this.state.messageUtility,userUtility:this.state.userUtility}),r.a.createElement(de,{exact:!0,path:"/login",component:re,messageUtility:this.state.messageUtility,userUtility:this.state.userUtility}),r.a.createElement(me,{exact:!0,path:"/recipe/add",component:B,messageUtility:this.state.messageUtility,userUtility:this.state.userUtility}),r.a.createElement(me,{exact:!0,path:"/recipe/edit/:recipeId",component:B,messageUtility:this.state.messageUtility,userUtility:this.state.userUtility})))))}}]),t}(a.Component),he=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=Object.assign.apply(Object,[{}].concat(n));return r.a.createElement(e,s)},de=function(e){var t=e.component,n=Object(c.a)(e,["component"]);return r.a.createElement(v.b,Object.assign({},n,{render:function(e){return he(t,e,n)}}))},me=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,a,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.component,a=Object(c.a)(t,["component"]),e.next=3,a.userUtility.getIsUserAdmin();case 3:return s=e.sent,e.abrupt("return",r.a.createElement(v.b,Object.assign({},a,{render:function(e){return console.log("PrivatePropRoute isUserAdmin",s),console.log("\n\n\n"),s?he(n,e,a):fe}})));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),fe=function(){return r.a.createElement(v.a,{to:"/login"})},ge=pe;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.3b6b1dc0.chunk.js.map